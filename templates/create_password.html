{% extends 'base.html' %}
{% block content %}
	<h2 class="page-title">Create Your Password</h2>
	
	<div class="card form-card">
		<h3 style="margin-top: 0; margin-bottom: 16px; font-size: 1.1em; color: var(--text-primary);">Set Password</h3>
		<p class="muted" style="margin-bottom: 20px; font-size: 0.9em;">
			Your email has been verified! Please create a password for your account.
		</p>
		<p class="muted" style="margin-bottom: 20px; font-size: 0.85em; color: var(--text-secondary);">
			Account: <strong>{{ email }}</strong>
		</p>
		
		<form method="post" class="form">
			<label>
				<span>Password</span>
				<input 
					name="password" 
					type="password" 
					placeholder="Enter your password" 
					minlength="6"
					required 
					autocomplete="new-password"
				/>
				<small class="muted" style="display: block; margin-top: 4px; font-size: 0.85em;">
					Must be at least 6 characters long
				</small>
			</label>
			<label>
				<span>Confirm Password</span>
				<input 
					name="confirm_password" 
					type="password" 
					placeholder="Confirm your password" 
					minlength="6"
					required 
					autocomplete="new-password"
				/>
			</label>
			<button class="button primary" type="submit">Create Password</button>
			<p class="muted" style="margin-top: 16px;">
				Already have a password? <a href="{{ url_for('login') }}">Go to Login</a>
			</p>
		</form>
	</div>

	<script>
		// Auto-focus on password input
		document.querySelector('input[name="password"]').focus();
		
		// Password match validation
		const passwordInput = document.querySelector('input[name="password"]');
		const confirmInput = document.querySelector('input[name="confirm_password"]');
		
		function validatePasswords() {
			if (confirmInput.value && passwordInput.value !== confirmInput.value) {
				confirmInput.setCustomValidity('Passwords do not match');
			} else {
				confirmInput.setCustomValidity('');
			}
		}
		
		passwordInput.addEventListener('input', validatePasswords);
		confirmInput.addEventListener('input', validatePasswords);
	</script>
{% endblock %}

